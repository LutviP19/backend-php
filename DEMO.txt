SETUP :
-------
- Composer:
composer install

- env (copy example)
$ cp .env.example .env

- Sample Database(mysql dump):
create table users : storage/database/migrations/mysql
create sample user : storage/database/migrations/mysql/insert_user.sql

- docker compose
redis : 
$ docker compose docker-compose/redis/docker-compose.yaml
rabbitmq :
$ docker compose docker-compose/rabbitmq-python/docker-compose.yaml
mailpit :
$ docker compose docker-compose/mailpit/docker-compose.yml


APP COMMANDS :
--------------
- Run Server
$ php -S localhost:8000 -t public/

- Setup app (planned)
$ php bin/console app:setup

- Get app info (planned)
$ php bin/console app:info

- Listen Message
$ php bin/console app:testing 1

CURL :
------
Note: 
[REPLACE_WITH_YOUR_OWN_SETUP] depend on your own generated key.
[REPLACE_WITH_YOUR_OWN_DATA] depend on your own data from database.

- Login 
--------
curl --location 'http://localhost:8000/auth/login' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'X-Api-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--data-raw '{
    "email" : "[REPLACE_WITH_YOUR_OWN_DATA]",
    "password" : "[REPLACE_WITH_YOUR_OWN_DATA]"
}'
-----
Used Response:
- token : [REPLACE_WITH_VALID_JWT]
- sessid : [REPLACE_WITH_VALID_SESION_ID]


- Logout 
---------
curl --location --request POST 'http://localhost:8000/auth/logout' \
--header 'Authorization: Bearer [REPLACE_WITH_VALID_JWT]' \
--header 'Cookie: BACKENDPHPSESSID=[REPLACE_WITH_VALID_SESION_ID]' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'X-Api-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--header 'X-Client-Token: [REPLACE_WITH_YOUR_OWN_SETUP]'

- Update Client token
----------------------
curl --location 'http://localhost:8000/auth/uptoken' \
--header 'Authorization: Bearer [REPLACE_WITH_VALID_JWT]' \
--header 'Cookie: BACKENDPHPSESSID=[REPLACE_WITH_VALID_SESION_ID]' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'Content-Type: application/json' \
--header 'X-Api-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--header 'X-Client-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--data-raw '{
    "email" : "[REPLACE_WITH_YOUR_OWN_DATA]",
    "password" : "[REPLACE_WITH_YOUR_OWN_DATA]"
}'

- Webhook (Display sample data)
-------------------------------
curl --location --request GET 'http://localhost:8000/webhook' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'X-Api-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--data-raw '{
    "email" : "admin@example.com",
    "password" : "password123",
    "credentials" : {
        "read" : true,
        "write" : true,
        "delete" : false
    }
}'

- Client profile 
-----------------
curl --location --request GET 'http://localhost:8000/client/profile' \
--header 'Authorization: Bearer [REPLACE_WITH_VALID_JWT]' \
--header 'Cookie: BACKENDPHPSESSID=[REPLACE_WITH_VALID_SESION_ID]' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'X-Api-Token: [REPLACE_WITH_YOUR_OWN_SETUP]' \
--header 'X-Client-Token: [REPLACE_WITH_YOUR_OWN_SETUP]'


Message Queue (with Encryption):
--------------------------------
- Producer
curl --location --request GET 'http://localhost:8000/extra'

- Consummer
$ php bin/console app:testing 1
Output:
 [x] 18-09-2025 20:45:11
id: 1
title: Title A
contents: The default interactive shell is now zsh.


Events :
--------
curl --location --request GET 'http://localhost:8000/extra'
Output:
Main output to place an order and trigger the event-driven process.
Order placed: 123

$ php bin/console app:testing 1
Output:
EventListener[message.queue]: [{"id":1,"title":"Title A","contents":"The default interactive shell is now zsh."},{"id":2,"title":"Title B","contents":"To update your account to use zsh"},{"id":3,"title":"Title C","contents":"For more details, please visit"}]


Non-Blocking Process:
---------------------
$ php bin/console app:testing 1
Output:
Let's start non-blocking version: 
Parse key id: [key:id, value:1]
Parse key title: [key:title, value:Title A]
Parse key contents: [key:contents, value:The default interactive shell is now zsh.]

simulateConcurrent-output: {"id":"1 counter: 10000x","title":"Title A counter: 2000x","contents":"The default interactive shell is now zsh. counter: 15000x"}


